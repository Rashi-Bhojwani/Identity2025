<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Resume Builder</title>

<!-- Tailwind CSS -->
<script src="https://cdn.tailwindcss.com"></script>
<!-- html2pdf -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>
    * {
  word-wrap: break-word;
  overflow-wrap: break-word;
  word-break: break-word;
}

  body {
    background: linear-gradient(135deg, #e8f0ff, #f5eaff);
  }

  /* A4 width but auto height */
  #a4Wrapper {
    width: 794px;
    background: white;
    margin: 0 auto;
    padding: 0;
    position: relative;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }

  #resumePreview {
    width: 100%;
    background: white;
    position: relative;
    overflow: visible; /* Allow resume to grow */
  }

  :root {
    --theme-primary: #1e3a8a;
  }

  .color-circle {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    cursor: pointer;
    border: 3px solid white;
    box-shadow: 0 0 5px rgba(0,0,0,0.2);
  }

  /* Canva Section Heading */
  .section-bar {
    background: var(--theme-primary);
    color: white;
    padding: 8px 14px;
    font-size: 15px;
    font-weight: 700;
    letter-spacing: 1px;
    margin-bottom: 12px;
  }

  /* Bullet styling */
  .resume-bullets ul {
    list-style-type: disc;
    padding-left: 20px;
    margin-top: 6px;
  }
</style>
</head>

<body class="font-sans">

<div class="flex flex-wrap gap-5 p-5 max-w-[1400px] mx-auto items-start">

  <!-- LEFT FORM (unchanged) -->
  <div id="formSection"
       class="flex-[1_1_350px] p-5 rounded-lg shadow-md sticky top-5 bg-white">

    <h2 class="text-3xl font-bold mb-4 bg-gradient-to-r from-blue-500 to-purple-500 bg-clip-text text-transparent">
      Resume Inputs
    </h2>

    <div class="flex gap-4 mb-6 items-center">
      <div class="color-circle" style="background:#1e3a8a" onclick="setTheme('blue')"></div>
      <div class="color-circle" style="background:#6b21a8" onclick="setTheme('purple')"></div>
      <div class="color-circle" style="background:#0f766e" onclick="setTheme('teal')"></div>
      <div class="color-circle" style="background:#b91c1c" onclick="setTheme('red')"></div>
    </div>

    <label class="block mb-1 text-base">Your Name</label>
    <input type="text" id="nameInput" class="w-full mb-3 p-3 border rounded-md" />

    <label class="block mb-1 text-base">Role</label>
    <input type="text" id="roleInput" class="w-full mb-3 p-3 border rounded-md" />

    <label class="block mb-1 text-base">Email</label>
    <input type="text" id="emailInput" class="w-full mb-3 p-3 border rounded-md" />

    <label class="block mb-1 text-base">Phone</label>
    <input type="text" id="phoneInput" class="w-full mb-3 p-3 border rounded-md" />

    <label class="block mb-1 text-base">Location</label>
    <input type="text" id="locationInput" class="w-full mb-3 p-3 border rounded-md" />

    <label class="block mb-1 text-base">LinkedIn</label>
    <input type="text" id="linkedinInput" class="w-full mb-3 p-3 border rounded-md" />

    <label class="block mb-1 text-base">GitHub</label>
    <input type="text" id="githubInput" class="w-full mb-3 p-3 border rounded-md" />

    <label class="block mb-1 text-base">Professional Summary</label>
    <textarea id="summaryInput" rows="3" class="w-full mb-3 p-3 border rounded-md"></textarea>

    <label class="block mb-1 text-base">Skills</label>
    <textarea id="skillsInput" rows="3" class="w-full mb-3 p-3 border rounded-md"></textarea>

    <label class="block mb-1 text-base">Experience</label>
    <textarea id="expInput" rows="3" class="w-full mb-3 p-3 border rounded-md"></textarea>

    <label class="block mb-1 text-base">Education</label>
    <textarea id="eduInput" rows="3" class="w-full mb-3 p-3 border rounded-md"></textarea>

    <label class="block mb-1 text-base">Projects</label>
    <textarea id="projInput" rows="3" class="w-full mb-3 p-3 border rounded-md"></textarea>

    <button id="downloadBtn"
            class="w-full py-4 mt-2 text-white text-lg font-bold rounded-lg
                   bg-gradient-to-r from-blue-600 to-indigo-600">
      Download Resume
    </button>
  </div>

  <!-- RIGHT PREVIEW (Updated) -->
  <div class="flex-[2_1_600px] min-w-[450px] flex justify-center overflow-x-auto">
    <div id="a4Wrapper">

      <div id="resumePreview" class="bg-white shadow-xl pb-10">

        <!-- HEADER -->
        <div class="pt-12 px-10 text-center">
          <h1 id="namePreview"
              class="text-4xl font-extrabold tracking-wide"
              style="color: var(--theme-primary);">
            Your Name
          </h1>
          <p id="rolePreview" class="text-gray-700 mt-1 text-lg tracking-wide">
            Your Role
          </p>
        </div>

        <!-- CONTACT DETAILS Section -->
        <div class="px-10 mt-10">
          <div class="section-bar">CONTACT DETAILS</div>
          <p class="text-gray-800 leading-6"><strong>Phone:</strong> <span id="phonePreview"></span></p>
          <p class="text-gray-800 leading-6"><strong>Email:</strong> <span id="emailPreview"></span></p>
          <p class="text-gray-800 leading-6"><strong>Location:</strong> <span id="locationPreview"></span></p>
          <p class="text-gray-800 leading-6"><strong>LinkedIn:</strong> <span id="linkedinPreview"></span></p>
          <p class="text-gray-800 leading-6"><strong>GitHub:</strong> <span id="githubPreview"></span></p>
        </div>

        <!-- ABOUT ME -->
        <div class="px-10 mt-14">
          <div class="section-bar">ABOUT ME</div>
          <p id="summaryPreview" class="text-gray-800 whitespace-pre-wrap leading-6"></p>
        </div>

        <!-- EXPERIENCE -->
        <div class="px-10 mt-14">
          <div class="section-bar">WORK EXPERIENCE</div>
          <p id="expPreview" class="text-gray-800 whitespace-pre-wrap leading-6 resume-bullets"></p>
        </div>

        <!-- EDUCATION -->
        <div class="px-10 mt-14">
          <div class="section-bar">EDUCATION</div>
          <p id="eduPreview" class="text-gray-800 whitespace-pre-wrap leading-6"></p>
        </div>

        <!-- SKILLS -->
        <div class="px-10 mt-14">
          <div class="section-bar">SKILLS</div>
          <p id="skillsPreview" class="text-gray-800 whitespace-pre-wrap leading-6 resume-bullets"></p>
        </div>

        <!-- PROJECTS -->
        <div class="px-10 mt-14">
          <div class="section-bar">PROJECTS</div>
          <p id="projPreview" class="text-gray-800 whitespace-pre-wrap leading-6"></p>
        </div>

      </div>
    </div>
  </div>
</div>

<script>
/* INPUT LIVE PREVIEW */
const fields = [
  "name", "role", "email", "phone", "location",
  "linkedin", "github", "summary", "skills",
  "exp", "edu", "proj"
];

fields.forEach(f => {
  document.getElementById(f + "Input")?.addEventListener("input", e => {
    document.getElementById(f + "Preview").innerText = e.target.value || "";
  });
});

/* THEME SWITCHER */
function setTheme(color) {
  if (color === "blue") {
    document.documentElement.style.setProperty("--theme-primary", "#1e3a8a");
  }
  if (color === "purple") {
    document.documentElement.style.setProperty("--theme-primary", "#6b21a8");
  }
  if (color === "teal") {
    document.documentElement.style.setProperty("--theme-primary", "#0f766e");
  }
  if (color === "red") {
    document.documentElement.style.setProperty("--theme-primary", "#b91c1c");
  }
}

/* PDF DOWNLOADER */
document.getElementById("downloadBtn").addEventListener("click", () => {
  const resume = document.getElementById("a4Wrapper");

  const options = {
    margin: 0,
    filename: "Resume.pdf",
    image: { type: "jpeg", quality: 1 },
    html2canvas: { scale: 2, useCORS: true, scrollY: 0 },
    jsPDF: { unit: "px", format: "a4" }
  };

  html2pdf().set(options).from(resume).save();
});
</script>

</body>
</html>